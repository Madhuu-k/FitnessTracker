<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DietTracker Pro</title>
    <style>
        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            color: #213547;
            line-height: 1.6;
        }

        #root {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0;
        }

        /* Navigation */
        .app-bar {
            background-color: #23272a;
            box-shadow: 0 2px 8px rgba(67,160,71,0.15);
            padding: 0 20px;
        }

        .toolbar {
            display: flex;
            align-items: center;
            padding: 15px 0;
        }

        .nav-title {
            flex-grow: 1;
            color: #fff;
            font-size: 1.25rem;
            font-weight: 600;
        }

        .nav-buttons {
            display: flex;
            gap: 15px;
        }

        .nav-button {
            color: #fff !important;
            text-transform: none;
            font-weight: 500;
        }

        /* Hero Section */
        .hero-section {
            position: relative;
            background: linear-gradient(90deg, #23272a 0%, #181c1f 100%);
            color: white;
            padding: 60px 20px;
            margin-bottom: 40px;
            overflow: hidden;
        }

        .hero-bg {
            position: absolute;
            right: 0;
            top: 0;
            height: 100%;
            width: 100%;
            object-fit: cover;
            opacity: 0.18;
            z-index: 0;
        }

        .hero-content {
            position: relative;
            z-index: 1;
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
        }

        .hero-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 15px;
        }

        .hero-subtitle {
            font-size: 1.3rem;
            margin-bottom: 0;
        }

        /* Form Styles */
        .paper {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            padding: 30px;
            margin: 20px auto;
            max-width: 800px;
        }

        .form-header {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
        }

        .form-title {
            font-size: 1.75rem;
            font-weight: 600;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .input-field {
            width: 100%;
            margin-bottom: 20px;
        }

        .input-field label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-field input,
        .input-field select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }

        .submit-button {
            background-color: #43a047;
            color: white;
            border: none;
            padding: 14px 20px;
            font-size: 16px;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
            font-weight: 600;
            margin-top: 20px;
        }

        .submit-button:hover {
            background-color: #388e3c;
        }

        /* Nutrition Display */
        .nutrition-container {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            justify-content: center;
            margin: 30px auto;
            max-width: 1000px;
        }

        .pie-chart-container {
            width: 100%;
            max-width: 400px;
            height: 300px;
        }

        .nutrition-details {
            background-color: rgba(26, 35, 126, 0.05);
            padding: 25px;
            border-radius: 8px;
            min-width: 250px;
            max-width: 400px;
        }

        .nutrition-title {
            color: #43a047;
            font-size: 1.25rem;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .calories-display {
            font-size: 2rem;
            color: #43a047;
            margin-bottom: 20px;
        }

        /* Food Logger */
        .food-list {
            margin-top: 20px;
            list-style: none;
        }

        .food-item {
            padding: 15px 0;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .food-info {
            flex-grow: 1;
        }

        .food-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .food-macros {
            color: #666;
            font-size: 0.9rem;
        }

        .delete-button {
            color: #f44336;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.2rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2rem;
            }
            .hero-subtitle {
                font-size: 1.1rem;
            }
            .form-grid {
                grid-template-columns: 1fr;
            }
            .nutrition-container {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- Navigation -->
        <header class="app-bar">
            <div class="toolbar">
                <h1 class="nav-title">DietTracker Pro</h1>
                <div class="nav-buttons">
                    <button class="nav-button">Home</button>
                    <button class="nav-button">Progress</button>
                    <button class="nav-button">Meal Plans</button>
                    <button class="nav-button">About</button>
                </div>
            </div>
        </header>

        <!-- Hero Section -->
        <section class="hero-section">
            <img class="hero-bg" src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1200&q=80" alt="Healthy food">
            <div class="hero-content">
                <h1 class="hero-title">Track Your Nutrition Journey</h1>
                <p class="hero-subtitle">Calculate your daily needs and track your progress</p>
            </div>
        </section>

        <!-- Main Content -->
        <main>
            <!-- User Info Form -->
            <div class="paper" id="userInfoForm">
                <div class="form-header">
                    <h2 class="form-title">Personal Information</h2>
                </div>
                <form id="userForm">
                    <div class="form-grid">
                        <div class="input-field">
                            <label for="name">Name</label>
                            <input type="text" id="name" name="name" required>
                        </div>
                        <div class="input-field">
                            <label for="age">Age</label>
                            <input type="number" id="age" name="age" required>
                        </div>
                        <div class="input-field">
                            <label for="gender">Gender</label>
                            <select id="gender" name="gender" required>
                                <option value="">Select</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                            </select>
                        </div>
                        <div class="input-field">
                            <label for="height">Height (cm)</label>
                            <input type="number" id="height" name="height" required>
                        </div>
                        <div class="input-field">
                            <label for="weight">Weight (kg)</label>
                            <input type="number" id="weight" name="weight" required>
                        </div>
                        <div class="input-field">
                            <label for="activityLevel">Activity Level</label>
                            <select id="activityLevel" name="activityLevel" required>
                                <option value="">Select</option>
                                <option value="sedentary">Sedentary (little or no exercise)</option>
                                <option value="light">Lightly active (light exercise 1-3 days/week)</option>
                                <option value="moderate">Moderately active (moderate exercise 3-5 days/week)</option>
                                <option value="very">Very active (hard exercise 6-7 days/week)</option>
                                <option value="extra">Extra active (very hard exercise & physical job)</option>
                            </select>
                        </div>
                        <div class="input-field">
                            <label for="goal">Goal</label>
                            <select id="goal" name="goal" required>
                                <option value="">Select</option>
                                <option value="lose">Lose Weight</option>
                                <option value="maintain">Maintain Weight</option>
                                <option value="gain">Gain Weight</option>
                                <option value="muscle">Build Muscle</option>
                            </select>
                        </div>
                    </div>
                    <button type="submit" class="submit-button">Calculate Calories</button>
                </form>
            </div>

            <!-- Nutrition Display (initially hidden) -->
            <div id="nutritionDisplay" style="display: none;">
                <div class="paper">
                    <div class="form-header">
                        <h2 class="form-title">Daily Nutrition Breakdown</h2>
                    </div>
                    <div class="nutrition-container">
                        <div class="pie-chart-container" id="pieChart"></div>
                        <div class="nutrition-details">
                            <h3 class="nutrition-title">Daily Targets</h3>
                            <div class="calories-display" id="caloriesDisplay">0 kcal</div>
                            <p>Protein: <span id="proteinDisplay">0</span>g</p>
                            <p>Carbohydrates: <span id="carbsDisplay">0</span>g</p>
                            <p>Fats: <span id="fatsDisplay">0</span>g</p>
                        </div>
                    </div>
                </div>

                <!-- Progress Pie Chart -->
                <div class="paper">
                    <h2 class="form-title">Daily Macro Progress</h2>
                    <div class="pie-chart-container" id="progressChart"></div>
                    <div id="macroProgress" style="text-align: center; margin-top: 20px;"></div>
                </div>

                <!-- Food Logger -->
                <div class="paper" id="foodLogger">
                    <h2 class="form-title">Food Logger</h2>
                    <form id="foodForm">
                        <div class="input-field">
                            <label for="foodName">Food Name</label>
                            <input type="text" id="foodName" name="name" required>
                        </div>
                        <div class="input-field">
                            <label for="foodCalories">Calories</label>
                            <input type="number" id="foodCalories" name="calories" required>
                        </div>
                        <div class="input-field">
                            <label for="foodProtein">Protein (g)</label>
                            <input type="number" id="foodProtein" name="protein">
                        </div>
                        <div class="input-field">
                            <label for="foodCarbs">Carbs (g)</label>
                            <input type="number" id="foodCarbs" name="carbs">
                        </div>
                        <div class="input-field">
                            <label for="foodFats">Fats (g)</label>
                            <input type="number" id="foodFats" name="fats">
                        </div>
                        <button type="submit" class="submit-button">Add Food</button>
                    </form>
                    <ul class="food-list" id="foodList"></ul>
                </div>
            </div>
        </main>
    </div>

    <!-- Chart.js for visualizations -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script>
        // Global variables
        let userInfo = null;
        let nutritionTargets = {
            calories: 0,
            protein: 0,
            carbs: 0,
            fats: 0
        };
        let loggedMacros = {
            protein: 0,
            carbs: 0,
            fats: 0
        };
        let foods = [];
        let nutritionChart, progressChart;

        // DOM Elements
        const userForm = document.getElementById('userForm');
        const nutritionDisplay = document.getElementById('nutritionDisplay');
        const foodForm = document.getElementById('foodForm');
        const foodList = document.getElementById('foodList');

        // Form submission - Calculate Nutrition
        userForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get form data
            const formData = {
                name: document.getElementById('name').value,
                age: parseInt(document.getElementById('age').value),
                gender: document.getElementById('gender').value,
                height: parseInt(document.getElementById('height').value),
                weight: parseInt(document.getElementById('weight').value),
                activityLevel: document.getElementById('activityLevel').value,
                goal: document.getElementById('goal').value
            };
            
            // Calculate nutrition
            calculateNutrition(formData);
            
            // Show nutrition display
            nutritionDisplay.style.display = 'block';
            
            // Scroll to results
            nutritionDisplay.scrollIntoView({ behavior: 'smooth' });
        });

        // Calculate nutrition needs
        function calculateNutrition(userData) {
            // Mifflin-St Jeor Equation for BMR
            let bmr;
            if (userData.gender === 'male') {
                bmr = 10 * userData.weight + 6.25 * userData.height - 5 * userData.age + 5;
            } else {
                bmr = 10 * userData.weight + 6.25 * userData.height - 5 * userData.age - 161;
            }

            // Activity multiplier
            const activityMultipliers = {
                sedentary: 1.2,
                light: 1.375,
                moderate: 1.55,
                very: 1.725,
                extra: 1.9
            };

            let tdee = bmr * activityMultipliers[userData.activityLevel];

            // Adjust based on goal
            if (userData.goal === 'lose') {
                tdee -= 500; // 500 calorie deficit
            } else if (userData.goal === 'gain') {
                tdee += 500; // 500 calorie surplus
            } else if (userData.goal === 'muscle') {
                tdee += 250; // 250 calorie surplus for muscle building
            }

            // Calculate macronutrient distribution
            let protein;
            if (userData.goal === 'muscle') {
                protein = Math.round(userData.weight * 2.4); // 2.4g per kg for muscle building
            } else {
                protein = Math.round(userData.weight * 2.2); // 2.2g per kg otherwise
            }
            const fats = Math.round((tdee * 0.25) / 9); // 25% of calories from fat
            const carbs = Math.round((tdee - (protein * 4 + fats * 9)) / 4; // Remaining calories from carbs

            // Update targets
            nutritionTargets = {
                calories: Math.round(tdee),
                protein,
                carbs,
                fats
            };

            // Reset logged macros
            loggedMacros = { protein: 0, carbs: 0, fats: 0 };
            foods = [];
            foodList.innerHTML = '';

            // Update display
            updateNutritionDisplay();
            createCharts();
        }

        // Update nutrition display
        function updateNutritionDisplay() {
            document.getElementById('caloriesDisplay').textContent = `${nutritionTargets.calories} kcal`;
            document.getElementById('proteinDisplay').textContent = nutritionTargets.protein;
            document.getElementById('carbsDisplay').textContent = nutritionTargets.carbs;
            document.getElementById('fatsDisplay').textContent = nutritionTargets.fats;

            // Update macro progress
            const macroProgress = document.getElementById('macroProgress');
            macroProgress.innerHTML = `
                <p>Protein: ${loggedMacros.protein}g / ${nutritionTargets.protein}g</p>
                <p>Carbs: ${loggedMacros.carbs}g / ${nutritionTargets.carbs}g</p>
                <p>Fats: ${loggedMacros.fats}g / ${nutritionTargets.fats}g</p>
            `;

            // Update progress chart
            updateProgressChart();
        }

        // Create charts
        function createCharts() {
            // Nutrition Chart
            const pieCtx = document.getElementById('pieChart').getContext('2d');
            
            if (nutritionChart) {
                nutritionChart.destroy();
            }
            
            nutritionChart = new Chart(pieCtx, {
                type: 'pie',
                data: {
                    labels: ['Protein', 'Carbs', 'Fats'],
                    datasets: [{
                        data: [
                            nutritionTargets.protein * 4,
                            nutritionTargets.carbs * 4,
                            nutritionTargets.fats * 9
                        ],
                        backgroundColor: [
                            '#0088FE',
                            '#00C49F',
                            '#FFBB28'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.raw || 0;
                                    const percentage = Math.round((value / nutritionTargets.calories) * 100);
                                    return `${label}: ${value} kcal (${percentage}%)`;
                                }
                            }
                        },
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });

            // Progress Chart
            const progressCtx = document.getElementById('progressChart').getContext('2d');
            
            if (progressChart) {
                progressChart.destroy();
            }
            
            progressChart = new Chart(progressCtx, {
                type: 'pie',
                data: {
                    labels: ['Protein', 'Carbs', 'Fats'],
                    datasets: [{
                        data: [
                            Math.min((loggedMacros.protein / nutritionTargets.protein) * 100, 100),
                            Math.min((loggedMacros.carbs / nutritionTargets.carbs) * 100, 100),
                            Math.min((loggedMacros.fats / nutritionTargets.fats) * 100, 100)
                        ],
                        backgroundColor: [
                            '#0088FE',
                            '#00C49F',
                            '#FFBB28'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.label}: ${Math.round(context.raw)}%`;
                                }
                            }
                        },
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        // Update progress chart
        function updateProgressChart() {
            if (progressChart) {
                progressChart.data.datasets[0].data = [
                    Math.min((loggedMacros.protein / nutritionTargets.protein) * 100, 100),
                    Math.min((loggedMacros.carbs / nutritionTargets.carbs) * 100, 100),
                    Math.min((loggedMacros.fats / nutritionTargets.fats) * 100, 100)
                ];
                progressChart.update();
            }
        }

        // Food Form submission
        foodForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const foodData = {
                name: document.getElementById('foodName').value,
                calories: parseInt(document.getElementById('foodCalories').value) || 0,
                protein: parseInt(document.getElementById('foodProtein').value) || 0,
                carbs: parseInt(document.getElementById('foodCarbs').value) || 0,
                fats: parseInt(document.getElementById('foodFats').value) || 0
            };

            // Add to foods list
            foods.push(foodData);
            
            // Update logged macros
            loggedMacros.protein += foodData.protein;
            loggedMacros.carbs += foodData.carbs;
            loggedMacros.fats += foodData.fats;
            
            // Update UI
            renderFoodList();
            updateNutritionDisplay();
            
            // Reset form
            foodForm.reset();
        });

        // Render food list
        function renderFoodList() {
            foodList.innerHTML = '';
            
            foods.forEach((food, index) => {
                const li = document.createElement('li');
                li.className = 'food-item';
                li.innerHTML = `
                    <div class="food-info">
                        <div class="food-name">${food.name}</div>
                        <div class="food-macros">
                            ${food.calories} kcal | P: ${food.protein}g | C: ${food.carbs}g | F: ${food.fats}g
                        </div>
                    </div>
                    <button class="delete-button" data-index="${index}">×</button>
                `;
                foodList.appendChild(li);
            });

            // Add event listeners to delete buttons
            document.querySelectorAll('.delete-button').forEach(button => {
                button.addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    const deletedFood = foods[index];
                    
                    // Remove from foods array
                    foods.splice(index, 1);
                    
                    // Update logged macros
                    loggedMacros.protein -= deletedFood.protein;
                    loggedMacros.carbs -= deletedFood.carbs;
                    loggedMacros.fats -= deletedFood.fats;
                    
                    // Update UI
                    renderFoodList();
                    updateNutritionDisplay();
                });
            });
        }
    </script>
</body>
</html>